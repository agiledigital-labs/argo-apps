apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
generatorOptions:
  disableNameSuffixHash: true
configurations:
  - ./configuration/varReference.yml
configMapGenerator:
  - name: config
    literals:
      - PLUGIN_NAME=ideaSearch
      - ENVIRONMENT=qa
      - COMMIT_HASH=7293a206953bbb914efba770cda885970a2e3327
bases:
  - ../../bases/atlassian-plugin
  - ../../bases/config
# The variables defined below can be referenced in resources using the syntax $(VARIABLE)
vars:
  - name: environment
    fieldref:
      fieldpath: data.ENVIRONMENT
    objref:
      apiVersion: v1
      kind: ConfigMap
      name: config
  - name: commitHash
    fieldref:
      fieldpath: data.COMMIT_HASH
    objref:
      apiVersion: v1
      kind: ConfigMap
      name: config
  - name: pluginName
    fieldref:
      fieldpath: data.PLUGIN_NAME
    objref:
      apiVersion: v1
      kind: ConfigMap
      name: config
